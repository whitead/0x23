{"mappings":"0xCAAAA,cAAc,4DAKd,MAAMC,EAAa,CACfC,QAASC,GAAc,KACvBC,QAASD,GAAc,KACvBE,cAAe,UACfC,cAAe,WAGnBC,UAAaC,IACT,MAAMC,EAAOD,EAAEC,KACTC,EAAQD,EAAK,GACbE,EAAMF,EAAK,GACjB,IAAIG,EAAS,GACC,mBAAVF,EACAE,EAAS,CAAEC,QAASZ,EAAWI,cAAeS,QAASb,EAAWK,eACjD,YAAVI,EACPE,EAASX,EAAWG,QAAQK,EAAK,IAChB,YAAVC,IACPE,EAASX,EAAWC,QAAQO,EAAK,KAErCM,YAAY,CAACL,EAAOC,EAAKC,GAAO,EAIpCI,cAAcC,MAAMJ,IAChBZ,EAAWI,cAAgB,SAC3BQ,EAAQK,YAAY,YAAYD,MAAK,KACjCJ,EAAQM,eAAe,+IAInBC,IACAnB,EAAWI,cAAgB,SAC3BJ,EAAWK,cAAgB,YAC5BW,MAAK,KACJhB,EAAWK,cAAgB,SAC3B,MAAMJ,EAAUW,EAAQQ,QAAQC,IAAI,WACpCrB,EAAWC,QAAWY,IAClB,IAEI,OADaZ,EAAQY,EAKzB,CAHE,MAAON,GAEL,OADAe,QAAQC,IAAIhB,GACL,IACX,GAEJ,MAAMJ,EAAUS,EAAQQ,QAAQC,IAAI,WACpCrB,EAAWG,QAAWU,IAClB,IAEI,OADaV,EAAQU,EAKzB,CAHE,MAAON,GAEL,OADAe,QAAQC,IAAIhB,GACL,IACX,EACJ,GACJ,IACAY,IACAnB,EAAWK,cAAgB,WAC/B,G","sources":["src/components/lib/selfies/selfies_worker.js"],"sourcesContent":["importScripts('https://cdn.jsdelivr.net/pyodide/v0.20.0/full/pyodide.js');\n\nconst selfiesVersion = 2.0;\nlet pyodide = null;\n// make fake function to start with\nconst selfiesMod = {\n    decoder: s => { return null },\n    encoder: s => { return null },\n    pyodideLoaded: 'loading',\n    selfiesLoaded: 'loading'\n};\n\nonmessage = (e) => {\n    const data = e.data;\n    const mtype = data[0];\n    const mid = data[1];\n    let result = '';\n    if (mtype === 'loading-status') {\n        result = { pyodide: selfiesMod.pyodideLoaded, selfies: selfiesMod.selfiesLoaded };\n    } else if (mtype === 'encoder') {\n        result = selfiesMod.encoder(data[2]);\n    } else if (mtype === 'decoder') {\n        result = selfiesMod.decoder(data[2]);\n    }\n    postMessage([mtype, mid, result]);\n}\n\n\nloadPyodide().then((pyodide) => {\n    selfiesMod.pyodideLoaded = 'loaded';\n    pyodide.loadPackage('micropip').then(() => {\n        pyodide.runPythonAsync(`\n            import micropip\n            await micropip.install('selfies==${selfiesVersion}')\n            from selfies import encoder, decoder\n        `, (err) => {\n            selfiesMod.pyodideLoaded = 'failed';\n            selfiesMod.selfiesLoaded = 'failed';\n        }).then(() => {\n            selfiesMod.selfiesLoaded = 'loaded'\n            const decoder = pyodide.globals.get('decoder');\n            selfiesMod.decoder = (selfies) => {\n                try {\n                    let result = decoder(selfies);\n                    return result;\n                } catch (e) {\n                    console.log(e);\n                    return null;\n                }\n            };\n            const encoder = pyodide.globals.get('encoder');\n            selfiesMod.encoder = (selfies) => {\n                try {\n                    let result = encoder(selfies);\n                    return result;\n                } catch (e) {\n                    console.log(e);\n                    return null;\n                }\n            };\n        });\n    }, (err) => {\n        selfiesMod.selfiesLoaded = 'failed';\n    })\n});\n"],"names":["importScripts","selfiesMod","decoder","s","encoder","pyodideLoaded","selfiesLoaded","onmessage","e","data","mtype","mid","result","pyodide","selfies","postMessage","loadPyodide","then","loadPackage","runPythonAsync","err","globals","get","console","log"],"version":3,"file":"selfies_worker.257d27b9.js.map"}